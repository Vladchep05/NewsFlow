{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{% endblock %}

{% block links %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-12 col-md-6">
            <div class="neon-card text-center">
                <h2 class="mb-4 neon-text" style="font-size: 40px;">‚ö° –ü—Ä–æ—Ñ–∏–ª—å ‚ö°</h2>
                <img src="{{ avatar_url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="rounded-circle avatar" width="180" height="180">
                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
                <div id="avatarModal" class="modal">
                    <div class="modal-overlay"></div>
                    <span class="close">&times;</span>
                    <img class="modal-content" id="modalAvatar" src="" alt="–ê–≤–∞—Ç–∞—Ä">
                </div>

                <h4 class="mt-3 neon-text" style="font-size: 28px;">{{ username }}</h4>

                <div class="mt-4 text-start">
                    <p class="neon-info neon-info-email"><strong>üìß –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:</strong>
                        {% if my_profile %}
                        {{ email }}
                        {% else %}
                        {{ email[:3] + '***@' + email.split('@')[-1].split('.')[-2] + '.' + email.split('.')[-1] }}
                        {% endif %}
                    </p>
                    <p class="neon-info neon-info-date"><strong>üìÖ –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ registration_date }}</p>
                    <p class="neon-info neon-info-articles"><strong>üìù –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π:</strong> {{ articles_count }}
                    </p>
                    <p class="neon-info neon-info-country"><strong>üåç –°—Ç—Ä–∞–Ω–∞:</strong> {{ country }}</p>
                </div>

                <!-- –ë–ª–æ–∫ "–û —Å–µ–±–µ" -->
                {% if about_me %}
                <div class="about-me">
                    <h5 class="neon-txt">üìù –û —Å–µ–±–µ:</h5>
                    <p style="font-size: 20px;">{{ about_me }}</p>
                </div>
                {% else %}
                <div class="about-me">
                    <h5 class="neon-txt">üìù –û —Å–µ–±–µ:</h5>
                    <p style="font-size: 20px;">–≠—Ç–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–∏–ª –æ–ø–∏—Å–∞–Ω–∏–µ –æ —Å–µ–±–µ.</p>
                </div>
                {% endif %}

                {% if my_profile %}
                <a href="{{ url_for('my_articles') }}" class="neon-btn mt-4 d-inline-block">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                {% endif %}

                <div class="mt-4 d-flex justify-content-around flex-wrap">
                    <a href="javascript:history.back()" class="neon-btn mb-2">‚Üê –ù–∞–∑–∞–¥</a>
                    <a href="{{ url_for('my_articles') }}" class="neon-btn mb-2">üìö –°–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—å–∏</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const modal = document.getElementById("avatarModal");
    const overlay = modal.querySelector(".modal-overlay");
    const avatar = document.querySelector(".avatar");
    const modalImg = document.getElementById("modalAvatar");
    const closeBtn = modal.querySelector(".close");

    avatar.onclick = () => {
      modal.style.display = "block";
      modalImg.src = avatar.src;
    };

    closeBtn.onclick = () => modal.style.display = "none";
    overlay.onclick = () => modal.style.display = "none";
</script>
{% endblock %}
