{% extends "base.html" %}

{% block title %}–õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π{% endblock %}

{% block links %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/news_feed.css') }}">
{% endblock %}

{% block body %}
<main class="container py-5">
    <h2 class="mb-4 fw-bold text-center">üì∞ –õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π</h2>

    {% if articles %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-2 g-4">
            {% for article in articles %}
                <div class="col">
                    <div class="card h-100 shadow-sm p-3 article-card">

                        <!-- –ê–≤—Ç–æ—Ä -->
                        <div class="d-flex align-items-center mb-3">
                            <img src="{{ article.author.avatar_url }}" class="rounded-circle me-3" width="48" height="48" alt="–ê–≤–∞—Ç–∞—Ä">
                            <div>
                                <h6 class="mb-0 fw-bold">{{ article.author.username }}</h6>
                                <small class="text-muted">üëÅ {{ article.views }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</small>
                            </div>
                        </div>

                        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                        <h4 class="card-title fw-semibold" style="font-family: Orbitron, sans-serif;">
                            {{ article.title }}
                        </h4>

                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                        {% if article.image_url %}
                            <img src="{{ article.image_url }}" class="img-fluid rounded article-image mb-3" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏">
                        {% endif %}

                        <!-- –û—Ç—Ä—ã–≤–æ–∫ —Ç–µ–∫—Å—Ç–∞ -->
                        <p class="card-text" style="font-family: {{ article.font }};">
                            {{ article.content[:300] }}{% if article.content|length > 300 %}...{% endif %}
                        </p>

                        <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" -->
                        <a href="{{ url_for('article_detail', article_id=article.id) }}" class="btn btn-outline-primary mt-2">
                            üîé –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center text-muted">–ü–æ–∫–∞ —á—Ç–æ –∑–¥–µ—Å—å –ø—É—Å—Ç–æ. –ë—É–¥—å –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –Ω–∞–ø–∏—à–µ—Ç —Å—Ç–∞—Ç—å—é!</p>
    {% endif %}
</main>
{% endblock %}
